<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>XYZ | Registro</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
     <link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="./css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <script>
    function registrar()
    {
    	var testEmail = "^[\\w!#$%&'*+/=?`{|}~^-]+(?:\\.[\\w!#$%&'*+/=?`{|}~^-]+)*@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,6}$";
		var patt = new RegExp(testEmail);
		
		if (!patt.test(document.getElementById("mail").value)){
		    alert("El correo no tiene el formato adecuado, verifica el campo.");
		}else{
		
				if(document.getElementById("pass").value.length < 5 || document.getElementById("confirm").value.length < 5 || document.getElementById("nombre").value.length > 20 )
				{
				
				alert("La contraseña no cumple la longitud mínima de 5 caracteres o el nombre excede los 20 caracteres.");
				
				}else{
				
					if(document.getElementById("pass").value !== document.getElementById("confirm").value){
						
						alert("Las contraseñas no coinciden, verifica los campos.");	
					}else{
				
					$.post("./control", { 
						accion: "register",
						name: document.getElementById('nombre').value,
						email: document.getElementById('mail').value,
						pass: document.getElementById('pass').value
						},
							function(data){	
					  	  	var flag = data.split(";")[0];
					  	  	alert(data.split(";")[1]);
					  	  	if(flag=="Exito")
					  	  		{
					  	  	window.location.replace("login.html");
					  	  		}
							  
							});	
					
					
				
					}
				}
		}
    }
    </script>
  </head>
  <body class="register-page">
    <div class="register-box">
      <div class="register-logo">
        <a href="#"><b>XYZ</b></a>
      </div>

      <div class="register-box-body">
        <p class="login-box-msg">Crear nueva cuenta</p>
       <form action="./control" method="post">
        <input type="hidden" value="" id="accion" name="accion">
          <div class="form-group has-feedback">
            <input type="text" class="form-control" placeholder="Nombre" id="nombre"/>
            <span class="fa fa-user form-control-feedback"></span>
          </div>
          <div class="form-group has-feedback">
            <input type="text" class="form-control" placeholder="Correo" id="mail"/>
            <span class="fa fa-envelope form-control-feedback"></span>
          </div>
          <div class="form-group has-feedback">
            <input type="password" class="form-control" placeholder="Contraseña" id="pass"/>
            <span class="fa fa-lock form-control-feedback"></span>
          </div>
          <div class="form-group has-feedback">
            <input type="password" class="form-control" placeholder="Repetir contraseña" id="confirm"/>
            <span class="fa fa-share form-control-feedback"></span>
          </div>
          <div class="row">
            <div class="col-xs-4">
              <a href="javascript:registrar()" class="btn btn-primary btn-block btn-flat">Registrar</a>
            </div><!-- /.col -->
          </div>
        </form>        


        <a href="login.html" class="text-center">Ya tengo cuenta</a>
      </div><!-- /.form-box -->
    </div><!-- /.register-box -->

    <!-- jQuery 2.1.3 -->
 <script src="./js/jQuery-2.1.3.min.js"></script>
    <!-- Bootstrap 3.3.2 JS -->
    <script src="./js/bootstrap.min.js" type="text/javascript"></script>
  </body>
</html>